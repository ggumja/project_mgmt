# Requirement Approval System PDCA Plan

> **Phase**: PLAN  
> **Date**: 2026-02-13  
> **Author**: Antigravity  

## 1. Objective (ëª©í‘œ)
ì‹œìŠ¤í…œ ê´€ë¦¬ì(Admin)ì™€ ë§¤ë‹ˆì €(Manager)ê°€ ë“±ë¡ëœ ìš”êµ¬ì‚¬í•­ì„ ê²€í† í•˜ê³  ìŠ¹ì¸í•˜ê±°ë‚˜, ë°˜ë ¤(Reject)í•  ìˆ˜ ìˆëŠ” ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì¶•í•˜ì—¬ í”„ë¡œì íŠ¸ ë°ì´í„°ì˜ ì‹ ë¢°ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.

## 2. Location Strategy (ë°°ì¹˜ ì „ëµ)
ì‚¬ìš©ìì˜ ì›Œí¬í”Œë¡œìš° íš¨ìœ¨ì„±ì„ ê³ ë ¤í•˜ì—¬ **ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸(Requirement Table) í†µí•© ë°©ì‹**ì„ ì±„íƒí•©ë‹ˆë‹¤.

### ğŸ”´ Option A: ë³„ë„ Admin/ì„¤ì • ë©”ë‰´ (ê¸°ê°)
- **ì¥ì **: ì¼ë°˜ ì‚¬ìš©ìì™€ ì™„ì „íˆ ë¶„ë¦¬ëœ ê²€í†  í™˜ê²½ ì œê³µ.
- **ë‹¨ì **: 
  - ê´€ë¦¬ìê°€ ë‚´ìš©ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ìƒì„¸ í™”ë©´ì„ ë‹¤ì‹œ ì—´ì–´ì•¼ í•¨(Context Switching).
  - ìš”êµ¬ì‚¬í•­ ëª©ë¡ê³¼ ê²€í†  ëª©ë¡ì´ ì´ì›í™”ë˜ì–´ ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì¦ê°€.
  - "ì„¤ì •" ë©”ë‰´ëŠ” ì£¼ë¡œ ì‹œìŠ¤í…œ ì„¤ì •(User, Code ë“±)ì— ì í•©í•˜ë©°, ë°ì¼ë¦¬ ì—…ë¬´ì¸ "ìŠ¹ì¸"ê³¼ëŠ” ì„±ê²©ì´ ë‹¤ë¦„.

### ğŸŸ¢ Option B: ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ í†µí•© + íƒ­/í•„í„° (ì±„íƒ)
- **ì¥ì **: 
  - ë³„ë„ í˜ì´ì§€ ì´ë™ ì—†ì´ ë¬¸ë§¥(Context) íŒŒì•… í›„ ì¦‰ì‹œ ìŠ¹ì¸ ê°€ëŠ¥.
  - "ê²€í†  ëŒ€ê¸°ì¤‘" íƒ­ì„ í†µí•´ í•  ì¼(Todo)ì²˜ëŸ¼ ê´€ë¦¬ ê°€ëŠ¥.
- **êµ¬í˜„ ë°©ì•ˆ**:
  - ìƒë‹¨ì— **[ì „ì²´] / [ë‚´ ì‘ì„±ê¸€] / [ê²€í†  ëŒ€ê¸°(Admin Only)]** íƒ­ ì¶”ê°€.
  - ë¦¬ìŠ¤íŠ¸ ë‚´ "ê´€ë¦¬" ì»¬ëŸ¼ì— ìŠ¹ì¸/ë°˜ë ¤ **Quick Action ë²„íŠ¼** ì œê³µ (ê´€ë¦¬ì ê¶Œí•œì¼ ë•Œë§Œ).

## 3. Workflow Design (ì›Œí¬í”Œë¡œìš° ì„¤ê³„)

### 3.1 ìƒíƒœ ì „ì´ (State Transition)
1. **Draft (ì´ˆì•ˆ)**: ì‘ì„±ìë§Œ ìˆ˜ì • ê°€ëŠ¥.
   - Action: `ìŠ¹ì¸ ìš”ì²­(Submit)` -> **Review**
2. **Review (ê²€í†  ì¤‘)**: ê´€ë¦¬ì/ë§¤ë‹ˆì €ë§Œ Action ê°€ëŠ¥. ì‘ì„±ìëŠ” ìˆ˜ì • ë¶ˆê°€(Lock).
   - Action: `ìŠ¹ì¸(Approve)` -> **Approved**
   - Action: `ë°˜ë ¤(Reject)` -> **Rejected** (ë°˜ë ¤ ì‚¬ìœ  ì…ë ¥ í•„ìˆ˜)
3. **Approved (ìŠ¹ì¸ë¨)**: ê°œë°œ ì§„í–‰ ê°€ëŠ¥ ìƒíƒœ.
   - Action: `êµ¬í˜„ ì™„ë£Œ(Implement)` -> **Implemented**
4. **Rejected (ë°˜ë ¤ë¨)**: ì‘ì„±ìê°€ ìˆ˜ì • í›„ ë‹¤ì‹œ ìš”ì²­.
   - Action: `ì¬ì‘ì„±(Edit)` -> **Draft**

### 3.2 Role-Based Access Control (RBAC)
- **Member**: `Draft` ìƒì„±, `Submit` ìš”ì²­, `Rejected` ê±´ ìˆ˜ì • ê°€ëŠ¥.
- **Manager/Admin**: `Review` ê±´ì— ëŒ€í•œ `Approve`/`Reject` ê¶Œí•œ, ê°•ì œ ìƒíƒœ ë³€ê²½ ê¶Œí•œ.
- **Viewer**: ì½ê¸° ì „ìš©.

## 4. Schema Changes (ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½ ê³„íš)
`requirements` í…Œì´ë¸”ì— ê²€í†  ì´ë ¥ ì¶”ì ì„ ìœ„í•œ ì»¬ëŸ¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```sql
ALTER TABLE requirements 
ADD COLUMN reviewer_id UUID REFERENCES user_profiles(id), -- ìŠ¹ì¸/ë°˜ë ¤ì
ADD COLUMN reviewed_at TIMESTAMPTZ,                     -- ìŠ¹ì¸/ë°˜ë ¤ ì¼ì‹œ
ADD COLUMN rejection_reason TEXT;                       -- ë°˜ë ¤ ì‚¬ìœ 
```

## 5. UI/UX Implementation Plan
1. **Tabs & Filters**: `RequirementTable` ìƒë‹¨ì— Statusë³„ í•„í„°ë§ íƒ­ ì¶”ê°€.
2. **Action Buttons**: 
   - ëª¨ë‹¬ ë‚´ë¶€ì˜ ë‹¨ìˆœ Dropdownì„ ì œê±°í•˜ê³ , ìƒíƒœë³„ **ì „ìš© ë²„íŠ¼(Workflow Action Button)**ìœ¼ë¡œ êµì²´.
   - ì˜ˆ: [ìŠ¹ì¸ ìš”ì²­], [ë°˜ë ¤í•˜ê¸°], [ìŠ¹ì¸í•˜ê¸°]
3. **Indicators**: 
   - ë¦¬ìŠ¤íŠ¸ì—ì„œ `Review` ìƒíƒœì¼ ë•Œ **"ìŠ¹ì¸ í•„ìš”" ë°°ì§€** ë“±ì„ ê°•ì¡°í•˜ì—¬ ê´€ë¦¬ìì˜ ì£¼ì˜ë¥¼ ë”.

## 6. Next Steps (DO Phase)
1. Supabase Schema Update (`reviewer_id`, `rejection_reason` ë“± ì¶”ê°€).
2. `RequirementTable` ìƒë‹¨ íƒ­ UI êµ¬í˜„.
3. `RequirementForm` ë‚´ ìŠ¹ì¸/ë°˜ë ¤ ë¡œì§ ë° ë²„íŠ¼ êµ¬í˜„.
